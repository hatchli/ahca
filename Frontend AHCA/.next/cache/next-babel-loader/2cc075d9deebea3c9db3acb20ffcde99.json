{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wade\\\\Documents\\\\AHCA Web\\\\Frontend AHCA\\\\components\\\\Cart.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { Query, Mutation } from \"react-apollo\";\nimport User from \"./User\";\nimport gql from \"graphql-tag\";\nimport CartStyles from \"./styles/CartStyles\";\nimport Supreme from \"./styles/Supreme\";\nimport CloseButton from \"./styles/CloseButton\";\nimport SickButton from \"./styles/SickButton\";\nimport CartItem from \"./CartItem\";\nimport calcTotalPrice from \"../lib/calcTotalPrice\";\nimport formatMoney from \"../lib/formatMoney\";\nimport { adopt } from \"react-adopt\";\nimport TakeMyMoney from \"./TakeMyMoney\";\nimport SignUpButton from \"./SignUpButton\";\nconst UPDATE_PHONE_ADDRESS = gql`\n  mutation UPDATE_PHONE_ADDRESS(\n    $name: String\n    $address: String\n    $postal: String\n    $phone: String\n    $email: String\n  ) {\n    updatePhoneLocation(\n      name: $name\n      address: $address\n      postal: $postal\n      phone: $phone\n      email: $email\n    ) {\n      id\n    }\n  }\n`;\nconst LOCAL_STATE_QUERY = gql`\n  query {\n    cartOpen @client\n  }\n`;\nconst TOGGLE_CART_MUTATION = gql`\n  mutation {\n    toggleCart @client\n  }\n`;\nconst Composed = adopt({\n  user: ({\n    render\n  }) => __jsx(User, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, render),\n  // cartItem: ({ render }) => <CartItem>{render}</CartItem>,\n  toggleCart: ({\n    render\n  }) => __jsx(Mutation, {\n    mutation: TOGGLE_CART_MUTATION,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, render),\n  updatePhoneAddress: ({\n    render\n  }) => __jsx(Mutation, {\n    mutation: UPDATE_PHONE_ADDRESS,\n    variables: (nameState, addressState, postalState, phoneState, emailState),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }),\n  localState: ({\n    render\n  }) => __jsx(Query, {\n    query: LOCAL_STATE_QUERY,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, render)\n});\n\nconst Cart = (props, {\n  item\n}) => {\n  const {\n    0: nameState,\n    1: setNameState\n  } = useState(\"\");\n  const {\n    0: addressState,\n    1: setAddressState\n  } = useState(\"\");\n  const {\n    0: postalState,\n    1: setPostalState\n  } = useState(\"\");\n  const {\n    0: phoneState,\n    1: setPhoneState\n  } = useState(\"\");\n  const {\n    0: emailState,\n    1: setEmailState\n  } = useState(\"\");\n  return __jsx(Composed, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, ({\n    user,\n    toggleCart,\n    localState,\n    updatePhoneAddress\n  }) => {\n    console.log(\"user.data\", user.data);\n    {\n      /* console.log(\"cartItemwithinCart\", cartItem); */\n    }\n    const me = user.data ? user.data.me : null;\n    if (!me) return null;\n    setNameState(me === null || me === void 0 ? void 0 : me.name);\n    setAddressState(me === null || me === void 0 ? void 0 : me.address);\n    setPostalState(me === null || me === void 0 ? void 0 : me.postal);\n    setPhoneState(me === null || me === void 0 ? void 0 : me.phone);\n    setEmailState(me === null || me === void 0 ? void 0 : me.email);\n    return __jsx(CartStyles, {\n      open: localState.data.cartOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, __jsx(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, __jsx(CloseButton, {\n      onClick: toggleCart,\n      title: \"close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"\\xD7\"), me.permissions.includes(\"GUEST\") ? __jsx(Supreme, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Guest Cart\") : __jsx(Supreme, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, me.name, \"'s Cart\"), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"You have \", me.cart.length, \" item\", me.cart.length === 1 ? \"\" : \"s\", \" in your cart\")), __jsx(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, me.cart.map(cartItem => __jsx(React.Fragment, null, __jsx(CartItem, {\n      key: cartItem.id,\n      cartItem: cartItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    })))), __jsx(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, formatMoney(calcTotalPrice(me.cart))), me.cart.length ? __jsx(TakeMyMoney, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, __jsx(SickButton, {\n      disabled: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Checkout\")) : me.permissions.includes(\"GUEST\") ? __jsx(SickButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, __jsx(SignUpButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Register\")) : __jsx(TakeMyMoney, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, __jsx(SickButton, {\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Checkout\"))));\n  });\n};\n\nexport default Cart;\nexport { LOCAL_STATE_QUERY, TOGGLE_CART_MUTATION };","map":{"version":3,"sources":["C:/Users/Wade/Documents/AHCA Web/Frontend AHCA/components/Cart.js"],"names":["React","useState","Query","Mutation","User","gql","CartStyles","Supreme","CloseButton","SickButton","CartItem","calcTotalPrice","formatMoney","adopt","TakeMyMoney","SignUpButton","UPDATE_PHONE_ADDRESS","LOCAL_STATE_QUERY","TOGGLE_CART_MUTATION","Composed","user","render","toggleCart","updatePhoneAddress","nameState","addressState","postalState","phoneState","emailState","localState","Cart","props","item","setNameState","setAddressState","setPostalState","setPhoneState","setEmailState","console","log","data","me","name","address","postal","phone","email","cartOpen","permissions","includes","cart","length","map","cartItem","id"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Query, Mutation } from \"react-apollo\";\r\nimport User from \"./User\";\r\nimport gql from \"graphql-tag\";\r\nimport CartStyles from \"./styles/CartStyles\";\r\nimport Supreme from \"./styles/Supreme\";\r\nimport CloseButton from \"./styles/CloseButton\";\r\nimport SickButton from \"./styles/SickButton\";\r\nimport CartItem from \"./CartItem\";\r\nimport calcTotalPrice from \"../lib/calcTotalPrice\";\r\nimport formatMoney from \"../lib/formatMoney\";\r\nimport { adopt } from \"react-adopt\";\r\nimport TakeMyMoney from \"./TakeMyMoney\";\r\nimport SignUpButton from \"./SignUpButton\";\r\n\r\nconst UPDATE_PHONE_ADDRESS = gql`\r\n  mutation UPDATE_PHONE_ADDRESS(\r\n    $name: String\r\n    $address: String\r\n    $postal: String\r\n    $phone: String\r\n    $email: String\r\n  ) {\r\n    updatePhoneLocation(\r\n      name: $name\r\n      address: $address\r\n      postal: $postal\r\n      phone: $phone\r\n      email: $email\r\n    ) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nconst LOCAL_STATE_QUERY = gql`\r\n  query {\r\n    cartOpen @client\r\n  }\r\n`;\r\n\r\nconst TOGGLE_CART_MUTATION = gql`\r\n  mutation {\r\n    toggleCart @client\r\n  }\r\n`;\r\n\r\nconst Composed = adopt({\r\n  user: ({ render }) => <User>{render}</User>,\r\n  // cartItem: ({ render }) => <CartItem>{render}</CartItem>,\r\n  toggleCart: ({ render }) => (\r\n    <Mutation mutation={TOGGLE_CART_MUTATION}>{render}</Mutation>\r\n  ),\r\n  updatePhoneAddress: ({ render }) => (\r\n    <Mutation\r\n      mutation={UPDATE_PHONE_ADDRESS}\r\n      variables={(nameState, addressState, postalState, phoneState, emailState)}\r\n    ></Mutation>\r\n  ),\r\n  localState: ({ render }) => <Query query={LOCAL_STATE_QUERY}>{render}</Query>\r\n});\r\n\r\nconst Cart = (props, { item }) => {\r\n  const [nameState, setNameState] = useState(\"\");\r\n  const [addressState, setAddressState] = useState(\"\");\r\n  const [postalState, setPostalState] = useState(\"\");\r\n  const [phoneState, setPhoneState] = useState(\"\");\r\n  const [emailState, setEmailState] = useState(\"\");\r\n  return (\r\n    <Composed>\r\n      {({ user, toggleCart, localState, updatePhoneAddress }) => {\r\n        console.log(\"user.data\", user.data);\r\n        {\r\n          /* console.log(\"cartItemwithinCart\", cartItem); */\r\n        }\r\n        const me = user.data ? user.data.me : null;\r\n        if (!me) return null;\r\n        setNameState(me?.name);\r\n        setAddressState(me?.address);\r\n        setPostalState(me?.postal);\r\n        setPhoneState(me?.phone);\r\n        setEmailState(me?.email);\r\n        return (\r\n          <CartStyles open={localState.data.cartOpen}>\r\n            <header>\r\n              <CloseButton onClick={toggleCart} title=\"close\">\r\n                &times;\r\n              </CloseButton>\r\n              {me.permissions.includes(\"GUEST\") ? (\r\n                <Supreme>Guest Cart</Supreme>\r\n              ) : (\r\n                <Supreme>{me.name}'s Cart</Supreme>\r\n              )}\r\n              <p>\r\n                You have {me.cart.length} item\r\n                {me.cart.length === 1 ? \"\" : \"s\"} in your cart\r\n              </p>\r\n            </header>\r\n            <ul>\r\n              {me.cart.map(cartItem => (\r\n                <>\r\n                  <CartItem key={cartItem.id} cartItem={cartItem} />\r\n                </>\r\n              ))}\r\n            </ul>\r\n            <footer>\r\n              <p>{formatMoney(calcTotalPrice(me.cart))}</p>\r\n\r\n              {me.cart.length ? (\r\n                <TakeMyMoney>\r\n                  <SickButton disabled={false}>Checkout</SickButton>\r\n                </TakeMyMoney>\r\n              ) : me.permissions.includes(\"GUEST\") ? (\r\n                <SickButton>\r\n                  <SignUpButton>Register</SignUpButton>\r\n                </SickButton>\r\n              ) : (\r\n                <TakeMyMoney>\r\n                  <SickButton disabled={true}>Checkout</SickButton>\r\n                </TakeMyMoney>\r\n              )}\r\n            </footer>\r\n          </CartStyles>\r\n        );\r\n      }}\r\n    </Composed>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\nexport { LOCAL_STATE_QUERY, TOGGLE_CART_MUTATION };\r\n"]},"metadata":{},"sourceType":"module"}