{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"C:\\\\Users\\\\Wade\\\\Documents\\\\AHCA Web\\\\Frontend AHCA\\\\components\\\\Cart.js\";\nvar __jsx = React.createElement;\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation {\\n    toggleCart @client\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  query {\\n    cartOpen @client\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation UPDATE_PHONE_ADDRESS(\\n    $name: String\\n    $address: String\\n    $postal: String\\n    $phone: String\\n    $email: String\\n  ) {\\n    updatePhoneAddress(\\n      name: $name\\n      address: $address\\n      postal: $postal\\n      phone: $phone\\n      email: $email\\n    ) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport { Query, Mutation } from \"react-apollo\";\nimport User from \"./User\";\nimport gql from \"graphql-tag\";\nimport CartStyles from \"./styles/CartStyles\";\nimport Supreme from \"./styles/Supreme\";\nimport CloseButton from \"./styles/CloseButton\";\nimport SickButton from \"./styles/SickButton\";\nimport CartItem from \"./CartItem\";\nimport calcTotalPrice from \"../lib/calcTotalPrice\";\nimport formatMoney from \"../lib/formatMoney\";\nimport { adopt } from \"react-adopt\";\nimport TakeMyMoney from \"./TakeMyMoney\";\nimport SignUpButton from \"./SignUpButton\";\nvar UPDATE_PHONE_ADDRESS = gql(_templateObject());\nvar LOCAL_STATE_QUERY = gql(_templateObject2());\nvar TOGGLE_CART_MUTATION = gql(_templateObject3());\nvar Composed = adopt({\n  user: function user(_ref) {\n    var render = _ref.render;\n    return __jsx(User, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, render);\n  },\n  // cartItem: ({ render }) => <CartItem>{render}</CartItem>,\n  toggleCart: function toggleCart(_ref2) {\n    var render = _ref2.render;\n    return __jsx(Mutation, {\n      mutation: TOGGLE_CART_MUTATION,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, render);\n  },\n  localState: function localState(_ref3) {\n    var render = _ref3.render;\n    return __jsx(Query, {\n      query: LOCAL_STATE_QUERY,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, render);\n  }\n});\n\nvar Cart = function Cart(props, _ref4) {\n  var item = _ref4.item;\n\n  var _useState = useState(\"\"),\n      nameState = _useState[0],\n      setNameState = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      addressState = _useState2[0],\n      setAddressState = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      postalState = _useState3[0],\n      setPostalState = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      phoneState = _useState4[0],\n      setPhoneState = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      emailState = _useState5[0],\n      setEmailState = _useState5[1];\n\n  return __jsx(Composed, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, function (_ref5) {\n    var user = _ref5.user,\n        toggleCart = _ref5.toggleCart,\n        localState = _ref5.localState;\n\n    __jsx(Mutation, {\n      mutation: UPDATE_PHONE_ADDRESS,\n      variables: (nameState, addressState, postalState, phoneState, emailState),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, function (updatePhoneAddress, _ref6) {\n      var loading = _ref6.loading,\n          error = _ref6.error;\n      console.log(\"user.data\", user.data);\n      var me = user.data ? user.data.me : null;\n      if (!me) return null;\n      setNameState(me === null || me === void 0 ? void 0 : me.name);\n      setAddressState(me === null || me === void 0 ? void 0 : me.address);\n      setPostalState(me === null || me === void 0 ? void 0 : me.postal);\n      setPhoneState(me === null || me === void 0 ? void 0 : me.phone);\n      setEmailState(me === null || me === void 0 ? void 0 : me.email);\n      return __jsx(CartStyles, {\n        open: localState.data.cartOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, __jsx(\"header\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, __jsx(CloseButton, {\n        onClick: toggleCart,\n        title: \"close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"\\xD7\"), me.permissions.includes(\"GUEST\") ? __jsx(Supreme, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Guest Cart\") : __jsx(Supreme, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, me.name, \"'s Cart\"), __jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"You have \", me.cart.length, \" item\", me.cart.length === 1 ? \"\" : \"s\", \" in your cart\")), __jsx(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, me.cart.map(function (cartItem) {\n        return __jsx(React.Fragment, null, __jsx(CartItem, {\n          key: cartItem.id,\n          cartItem: cartItem,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }));\n      })), __jsx(\"footer\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, __jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, formatMoney(calcTotalPrice(me.cart))), me.cart.length ? __jsx(TakeMyMoney, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, __jsx(SickButton, {\n        disabled: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Checkout\")) : me.permissions.includes(\"GUEST\") ? __jsx(SickButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, __jsx(SignUpButton, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Register\")) : __jsx(TakeMyMoney, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, __jsx(SickButton, {\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Checkout\"))));\n    });\n  });\n};\n\nexport default Cart;\nexport { LOCAL_STATE_QUERY, TOGGLE_CART_MUTATION };","map":{"version":3,"sources":["C:/Users/Wade/Documents/AHCA Web/Frontend AHCA/components/Cart.js"],"names":["React","useState","Query","Mutation","User","gql","CartStyles","Supreme","CloseButton","SickButton","CartItem","calcTotalPrice","formatMoney","adopt","TakeMyMoney","SignUpButton","UPDATE_PHONE_ADDRESS","LOCAL_STATE_QUERY","TOGGLE_CART_MUTATION","Composed","user","render","toggleCart","localState","Cart","props","item","nameState","setNameState","addressState","setAddressState","postalState","setPostalState","phoneState","setPhoneState","emailState","setEmailState","updatePhoneAddress","loading","error","console","log","data","me","name","address","postal","phone","email","cartOpen","permissions","includes","cart","length","map","cartItem","id"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Query, Mutation } from \"react-apollo\";\r\nimport User from \"./User\";\r\nimport gql from \"graphql-tag\";\r\nimport CartStyles from \"./styles/CartStyles\";\r\nimport Supreme from \"./styles/Supreme\";\r\nimport CloseButton from \"./styles/CloseButton\";\r\nimport SickButton from \"./styles/SickButton\";\r\nimport CartItem from \"./CartItem\";\r\nimport calcTotalPrice from \"../lib/calcTotalPrice\";\r\nimport formatMoney from \"../lib/formatMoney\";\r\nimport { adopt } from \"react-adopt\";\r\nimport TakeMyMoney from \"./TakeMyMoney\";\r\nimport SignUpButton from \"./SignUpButton\";\r\n\r\nconst UPDATE_PHONE_ADDRESS = gql`\r\n  mutation UPDATE_PHONE_ADDRESS(\r\n    $name: String\r\n    $address: String\r\n    $postal: String\r\n    $phone: String\r\n    $email: String\r\n  ) {\r\n    updatePhoneAddress(\r\n      name: $name\r\n      address: $address\r\n      postal: $postal\r\n      phone: $phone\r\n      email: $email\r\n    ) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nconst LOCAL_STATE_QUERY = gql`\r\n  query {\r\n    cartOpen @client\r\n  }\r\n`;\r\n\r\nconst TOGGLE_CART_MUTATION = gql`\r\n  mutation {\r\n    toggleCart @client\r\n  }\r\n`;\r\n\r\nconst Composed = adopt({\r\n  user: ({ render }) => <User>{render}</User>,\r\n  // cartItem: ({ render }) => <CartItem>{render}</CartItem>,\r\n  toggleCart: ({ render }) => (\r\n    <Mutation mutation={TOGGLE_CART_MUTATION}>{render}</Mutation>\r\n  ),\r\n  localState: ({ render }) => <Query query={LOCAL_STATE_QUERY}>{render}</Query>\r\n});\r\n\r\nconst Cart = (props, { item }) => {\r\n  const [nameState, setNameState] = useState(\"\");\r\n  const [addressState, setAddressState] = useState(\"\");\r\n  const [postalState, setPostalState] = useState(\"\");\r\n  const [phoneState, setPhoneState] = useState(\"\");\r\n  const [emailState, setEmailState] = useState(\"\");\r\n  return (\r\n    <Composed>\r\n      {({ user, toggleCart, localState }) => {\r\n        <Mutation\r\n          mutation={UPDATE_PHONE_ADDRESS}\r\n          variables={\r\n            (nameState, addressState, postalState, phoneState, emailState)\r\n          }\r\n        >\r\n          {(updatePhoneAddress, { loading, error }) => {\r\n            console.log(\"user.data\", user.data);\r\n            const me = user.data ? user.data.me : null;\r\n            if (!me) return null;\r\n            setNameState(me?.name);\r\n            setAddressState(me?.address);\r\n            setPostalState(me?.postal);\r\n            setPhoneState(me?.phone);\r\n            setEmailState(me?.email);\r\n            return (\r\n              <CartStyles open={localState.data.cartOpen}>\r\n                <header>\r\n                  <CloseButton onClick={toggleCart} title=\"close\">\r\n                    &times;\r\n                  </CloseButton>\r\n                  {me.permissions.includes(\"GUEST\") ? (\r\n                    <Supreme>Guest Cart</Supreme>\r\n                  ) : (\r\n                    <Supreme>{me.name}'s Cart</Supreme>\r\n                  )}\r\n                  <p>\r\n                    You have {me.cart.length} item\r\n                    {me.cart.length === 1 ? \"\" : \"s\"} in your cart\r\n                  </p>\r\n                </header>\r\n                <ul>\r\n                  {me.cart.map(cartItem => (\r\n                    <>\r\n                      <CartItem key={cartItem.id} cartItem={cartItem} />\r\n                    </>\r\n                  ))}\r\n                </ul>\r\n                <footer>\r\n                  <p>{formatMoney(calcTotalPrice(me.cart))}</p>\r\n\r\n                  {me.cart.length ? (\r\n                    <TakeMyMoney>\r\n                      <SickButton disabled={false}>Checkout</SickButton>\r\n                    </TakeMyMoney>\r\n                  ) : me.permissions.includes(\"GUEST\") ? (\r\n                    <SickButton>\r\n                      <SignUpButton>Register</SignUpButton>\r\n                    </SickButton>\r\n                  ) : (\r\n                    <TakeMyMoney>\r\n                      <SickButton disabled={true}>Checkout</SickButton>\r\n                    </TakeMyMoney>\r\n                  )}\r\n                </footer>\r\n              </CartStyles>\r\n            );\r\n          }}\r\n        </Mutation>;\r\n      }}\r\n    </Composed>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\nexport { LOCAL_STATE_QUERY, TOGGLE_CART_MUTATION };\r\n"]},"metadata":{},"sourceType":"module"}