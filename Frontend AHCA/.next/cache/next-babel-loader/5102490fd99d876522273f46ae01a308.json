{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseFloat from \"@babel/runtime-corejs2/core-js/parse-float\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation UPDATE_PHONE_LOCATION(\\n    $name: String\\n    $location: String\\n    $phone: String\\n    $email: String\\n  ) {\\n    updatePhoneLocation(\\n      name: $name\\n      location: $location\\n      phone: $phone\\n      email: $email\\n    ) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from \"react\";\nimport wait from \"waait\";\nimport { Query, Mutation, withApollo } from \"react-apollo\";\nimport { CURRENT_USER_QUERY } from \"./User\";\nimport gql from \"graphql-tag\";\nimport { Label, Input, Select, Textarea, Radio, Checkbox } from \"@rebass/forms\";\nimport { Box, Flex, Button, Card, Image, Heading, Text } from \"rebass\";\nvar UPDATE_PHONE_LOCATION = gql(_templateObject());\n\nvar LocationCard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LocationCard, _Component);\n\n  function LocationCard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LocationCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LocationCard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      name: \"\",\n      location: \"\",\n      phone: \"\"\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          type = _e$target.type,\n          value = _e$target.value;\n      var val = type === \"number\" ? _parseFloat(value) : value;\n\n      _this.setState(_defineProperty({}, name, val));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleUpdateLocation\", function () {\n      var event = new Event(\"input\", {\n        bubbles: true\n      });\n\n      _this.myinput.dispatchEvent(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChangeLocation\", function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(wait(300));\n\n            case 2:\n              _this.props.client.mutate({\n                mutation: UPDATE_PHONE_LOCATION,\n                variables: _this.state\n              });\n\n              console.log(_this.state.location);\n              console.log(\"handleChangeLocation called\");\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(LocationCard, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      if (this.props.county !== prevProps.county && this.props.county !== \"Select Your Location on the Map!\") {\n        this.setState(function (prevState) {\n          return _objectSpread({}, prevState, {\n            location: _this2.props.county\n          });\n        });\n        console.log(this.state.location);\n        this.handleChangeLocation();\n        console.log(this.state.location);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var maround = [1, 3];\n      var pleft = [0, 1, 2, 3];\n      var wconst = [1, 1 / 4]; // const [county] = this.props;\n\n      return __jsx(React.Fragment, null, __jsx(Query, {\n        query: CURRENT_USER_QUERY\n      }, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading;\n        return __jsx(Mutation, {\n          mutation: UPDATE_PHONE_LOCATION,\n          variables: _this3.state\n        }, function (updatePhoneLocation, _ref2) {\n          var loading = _ref2.loading,\n              error = _ref2.error;\n          return __jsx(\"div\", null, __jsx(Box, {\n            as: \"form\",\n            onSubmit: function _callee2(e) {\n              var res;\n              return _regeneratorRuntime.async(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      e.preventDefault();\n                      _context2.next = 3;\n                      return _regeneratorRuntime.awrap(updatePhoneLocation());\n\n                    case 3:\n                      res = _context2.sent;\n\n                    case 4:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              });\n            },\n            pl: pleft,\n            py: 3,\n            width: 1\n          }, __jsx(Heading, {\n            pcolor: \"near-black\",\n            fontSize: [4, 5, 6]\n          }, \"Are we in your neighboorhood?\"), __jsx(Flex, {\n            flexWrap: \"wrap\"\n          }, __jsx(Box, {\n            width: wconst,\n            mx: maround,\n            pl: pleft\n          }, __jsx(Label, {\n            htmlFor: \"name\"\n          }, \"Name\"), __jsx(Input, {\n            id: \"name\",\n            name: \"name\",\n            type: \"text\",\n            placeholder: \"Name\",\n            value: _this3.state.name,\n            onChange: function _callee3(e) {\n              var res;\n              return _regeneratorRuntime.async(function _callee3$(_context3) {\n                while (1) {\n                  switch (_context3.prev = _context3.next) {\n                    case 0:\n                      _this3.handleChange(e);\n\n                      _context3.next = 3;\n                      return _regeneratorRuntime.awrap(wait(3000));\n\n                    case 3:\n                      _context3.next = 5;\n                      return _regeneratorRuntime.awrap(updatePhoneLocation());\n\n                    case 5:\n                      res = _context3.sent;\n                      error && alert(error);\n\n                    case 7:\n                    case \"end\":\n                      return _context3.stop();\n                  }\n                }\n              });\n            }\n          })), __jsx(Box, {\n            width: wconst,\n            mx: maround\n          }, __jsx(Label, {\n            htmlFor: \"name\"\n          }, \"Phone\"), __jsx(Input, {\n            id: \"phone\",\n            name: \"phone\",\n            type: \"text\",\n            placeholder: \"Phone\",\n            value: _this3.state.phone,\n            onChange: function _callee4(e) {\n              var res;\n              return _regeneratorRuntime.async(function _callee4$(_context4) {\n                while (1) {\n                  switch (_context4.prev = _context4.next) {\n                    case 0:\n                      _this3.handleChange(e);\n\n                      _context4.next = 3;\n                      return _regeneratorRuntime.awrap(wait(3000));\n\n                    case 3:\n                      _context4.next = 5;\n                      return _regeneratorRuntime.awrap(updatePhoneLocation());\n\n                    case 5:\n                      res = _context4.sent;\n\n                    case 6:\n                    case \"end\":\n                      return _context4.stop();\n                  }\n                }\n              });\n            }\n          })), __jsx(Box, {\n            width: wconst,\n            mx: maround\n          }, __jsx(Label, {\n            htmlFor: \"location\"\n          }, \"Location\"), _this3.state.location !== \"\" ? __jsx(Heading, {\n            fontSize: [3, 4, 5],\n            color: \"near-black\"\n          }, _this3.props.county) : __jsx(Heading, {\n            fontSize: [3, 4, 3],\n            color: \"near-black\"\n          }, _this3.props.county))), __jsx(Flex, {\n            mx: -2,\n            flexWrap: \"wrap\"\n          }, __jsx(Box, {\n            p: 2,\n            ml: \"[3, 4, 5, 6]\"\n          }, __jsx(Button, {\n            type: \"submit\",\n            bg: \"dark-green\"\n          }, \"Submit\")))));\n        });\n      }));\n    }\n  }]);\n\n  return LocationCard;\n}(Component);\n\nexport default withApollo(LocationCard);","map":null,"metadata":{},"sourceType":"module"}