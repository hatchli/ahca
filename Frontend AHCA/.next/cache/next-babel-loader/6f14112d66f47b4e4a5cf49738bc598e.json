{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"C:\\\\Users\\\\Wade\\\\Documents\\\\AHCA Web\\\\Frontend AHCA\\\\pages\\\\item.js\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation CREATE_GUEST_MUTATION(\\n    $email: String\\n    $name: String\\n    $password: String\\n  ) {\\n    createGuest(email: $email, name: $name, password: $password) {\\n      id\\n      email\\n      name\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport SingleItem from \"../components/SingleItem\";\nimport React, { useState, useEffect } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { CURRENT_USER_QUERY } from \"../components/User\";\nimport User from \"../components/User\";\nimport { ThemeProvider } from \"emotion-theming\";\nimport theme from \"../components/theme\";\nvar CREATE_GUEST_MUTATION = gql(_templateObject());\n\nvar Item = function Item(props, _ref) {\n  var id = _ref.id;\n  return __jsx(ThemeProvider, {\n    theme: theme,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, __jsx(User, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, function (_ref2) {\n    var data = _ref2.data,\n        loading = _ref2.loading;\n    var me = data ? data.me : null;\n    var guest = me === null ? true : false;\n\n    var _useState = useState(guest),\n        guestState = _useState[0],\n        setGuestState = _useState[1];\n\n    return !guest ? __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, __jsx(SingleItem, {\n      id: props.query.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    })) : loading ? __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, __jsx(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, \"Loading\")) : __jsx(Mutation, {\n      mutation: CREATE_GUEST_MUTATION,\n      variables: {\n        id: id\n      },\n      refetchQueries: [{\n        query: CURRENT_USER_QUERY\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, function (createGuest, _ref3) {\n      var loading = _ref3.loading,\n          error = _ref3.error;\n      useEffect(function () {\n        function fetchData() {\n          return _regeneratorRuntime.async(function fetchData$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return _regeneratorRuntime.awrap(createGuest());\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          });\n        }\n\n        !loading && guest && fetchData();\n      }, []);\n      setGuestState(false);\n      return __jsx(React.Fragment, null, __jsx(SingleItem, {\n        id: props.query.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }));\n    });\n  }));\n};\n\nexport default Item;","map":{"version":3,"sources":["C:/Users/Wade/Documents/AHCA Web/Frontend AHCA/pages/item.js"],"names":["SingleItem","React","useState","useEffect","Mutation","gql","CURRENT_USER_QUERY","User","ThemeProvider","theme","CREATE_GUEST_MUTATION","Item","props","id","data","loading","me","guest","guestState","setGuestState","query","createGuest","error","fetchData"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,UAAP,MAAuB,0BAAvB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,kBAAT,QAAmC,oBAAnC;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,SAASC,aAAT,QAA8B,iBAA9B;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AAEA,IAAMC,qBAAqB,GAAGL,GAAH,mBAA3B;;AAcA,IAAMM,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD;AAAA,MAAUC,EAAV,QAAUA,EAAV;AAAA,SACX,MAAC,aAAD;AAAe,IAAA,KAAK,EAAEJ,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,iBAAuB;AAAA,QAApBK,IAAoB,SAApBA,IAAoB;AAAA,QAAdC,OAAc,SAAdA,OAAc;AACtB,QAAIC,EAAE,GAAGF,IAAI,GAAGA,IAAI,CAACE,EAAR,GAAa,IAA1B;AACA,QAAIC,KAAK,GAAGD,EAAE,KAAK,IAAP,GAAc,IAAd,GAAqB,KAAjC;;AAFsB,oBAGcd,QAAQ,CAACe,KAAD,CAHtB;AAAA,QAGfC,UAHe;AAAA,QAGHC,aAHG;;AAItB,WAAO,CAACF,KAAD,GACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,UAAD;AAAY,MAAA,EAAE,EAAEL,KAAK,CAACQ,KAAN,CAAYP,EAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADK,GAIHE,OAAO,GACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CADS,GAKT,MAAC,QAAD;AACE,MAAA,QAAQ,EAAEL,qBADZ;AAEE,MAAA,SAAS,EAAE;AAAEG,QAAAA,EAAE,EAAFA;AAAF,OAFb;AAGE,MAAA,cAAc,EAAE,CAAC;AAAEO,QAAAA,KAAK,EAAEd;AAAT,OAAD,CAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKG,UAACe,WAAD,SAAqC;AAAA,UAArBN,OAAqB,SAArBA,OAAqB;AAAA,UAAZO,KAAY,SAAZA,KAAY;AACpCnB,MAAAA,SAAS,CAAC,YAAM;AACd,iBAAeoB,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDACQF,WAAW,EADnB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAGA,SAACN,OAAD,IAAYE,KAAZ,IAAqBM,SAAS,EAA9B;AACD,OALQ,EAKN,EALM,CAAT;AAMAJ,MAAAA,aAAa,CAAC,KAAD,CAAb;AACA,aACE,4BACE,MAAC,UAAD;AAAY,QAAA,EAAE,EAAEP,KAAK,CAACQ,KAAN,CAAYP,EAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAKD,KAlBH,CATF;AA8BD,GAnCH,CADF,CADW;AAAA,CAAb;;AA0CA,eAAeF,IAAf","sourcesContent":["import SingleItem from \"../components/SingleItem\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport { CURRENT_USER_QUERY } from \"../components/User\";\r\nimport User from \"../components/User\";\r\nimport { ThemeProvider } from \"emotion-theming\";\r\nimport theme from \"../components/theme\";\r\n\r\nconst CREATE_GUEST_MUTATION = gql`\r\n  mutation CREATE_GUEST_MUTATION(\r\n    $email: String\r\n    $name: String\r\n    $password: String\r\n  ) {\r\n    createGuest(email: $email, name: $name, password: $password) {\r\n      id\r\n      email\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nconst Item = (props, { id }) => (\r\n  <ThemeProvider theme={theme}>\r\n    <User>\r\n      {({ data, loading }) => {\r\n        let me = data ? data.me : null;\r\n        let guest = me === null ? true : false;\r\n        const [guestState, setGuestState] = useState(guest);\r\n        return !guest ? (\r\n          <div>\r\n            <SingleItem id={props.query.id} />\r\n          </div>\r\n        ) : loading ? (\r\n          <div>\r\n            <h2>Loading</h2>\r\n          </div>\r\n        ) : (\r\n          <Mutation\r\n            mutation={CREATE_GUEST_MUTATION}\r\n            variables={{ id }}\r\n            refetchQueries={[{ query: CURRENT_USER_QUERY }]}\r\n          >\r\n            {(createGuest, { loading, error }) => {\r\n              useEffect(() => {\r\n                async function fetchData() {\r\n                  await createGuest();\r\n                }\r\n                !loading && guest && fetchData();\r\n              }, []);\r\n              setGuestState(false);\r\n              return (\r\n                <>\r\n                  <SingleItem id={props.query.id} />\r\n                </>\r\n              );\r\n            }}\r\n          </Mutation>\r\n        );\r\n      }}\r\n    </User>\r\n  </ThemeProvider>\r\n);\r\n\r\nexport default Item;\r\n"]},"metadata":{},"sourceType":"module"}