{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { Query, Mutation } from \"react-apollo\";\nimport { CURRENT_USER_QUERY } from \"./User\";\nimport gql from \"graphql-tag\";\nimport { Label, Input, Select, Textarea, Radio, Checkbox } from \"@rebass/forms\";\nimport { Flex, Heading, Box, Button } from \"rebass\";\nimport Error from \"./ErrorMessage\";\nconst VALIDATE_APPLY_PROMO_CODE = gql`\n  mutation updatePriceAfterPromoCode($id: ID!, $promotion: String!) {\n    updatePriceAfterPromoCode(id: $id, promotion: $promotion) {\n      id\n      promotionPrice\n    }\n  }\n`;\n\nconst PromoCode = props => {\n  const {\n    0: promoState,\n    1: setPromoState\n  } = useState(\"\");\n  const maround = [1, 3];\n  const pleft = [0, 1, 2, 3];\n  const wconst = [1, 3 / 4];\n  console.log(props);\n  return __jsx(React.Fragment, null, __jsx(Query, {\n    query: CURRENT_USER_QUERY\n  }, ({\n    data,\n    loading\n  }) => {\n    return __jsx(Mutation, {\n      mutation: VALIDATE_APPLY_PROMO_CODE,\n      variables: {\n        id: props.id,\n        promotion: promoState\n      },\n      refetchQueries: [{\n        query: CURRENT_USER_QUERY\n      }]\n    }, (updatePriceAfterPromoCode, {\n      loading,\n      error\n    }) => {\n      return __jsx(Box, {\n        as: \"form\",\n        onSubmit: async e => {\n          e.preventDefault();\n          const res = await updatePriceAfterPromoCode();\n        } // pl={pleft}\n        // py={3}\n        ,\n        ml: -2,\n        width: 1\n      }, __jsx(Flex, {\n        flexDirection: \"row\",\n        alignItems: true\n      }, __jsx(Box, {\n        width: 1 / 2,\n        mx: maround,\n        pl: 0\n      }, __jsx(Input, {\n        id: \"promo\",\n        name: \"promo\",\n        type: \"text\",\n        placeholder: \"Promo Code\",\n        value: promoState,\n        onChange: async e => {\n          setPromoState(e.target.value);\n        }\n      })), __jsx(Box, {\n        width: 1 / 8\n      }, __jsx(Button, {\n        type: \"submit\",\n        bg: \"dark-green\"\n      }, \"Submit\"))), __jsx(Error, {\n        error: error\n      }));\n    });\n  }));\n};\n\nexport default PromoCode;","map":null,"metadata":{},"sourceType":"module"}