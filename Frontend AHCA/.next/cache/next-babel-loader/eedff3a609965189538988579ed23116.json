{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wade\\\\Documents\\\\AHCA Web\\\\Frontend AHCA\\\\components\\\\Cart.js\";\nvar __jsx = React.createElement;\nimport React, { useRef, useEffect } from \"react\";\nimport { Query, Mutation } from \"react-apollo\";\nimport User from \"./User\";\nimport gql from \"graphql-tag\";\nimport CartStyles from \"./styles/CartStyles\";\nimport Supreme from \"./styles/Supreme\";\nimport CloseButton from \"./styles/CloseButton\";\nimport SickButton from \"./styles/SickButton\";\nimport CartItem from \"./CartItem\";\nimport calcTotalPrice from \"../lib/calcTotalPrice\";\nimport formatMoney from \"../lib/formatMoney\";\nimport { adopt } from \"react-adopt\";\nimport TakeMyMoney from \"./TakeMyMoney\";\nconst LOCAL_STATE_QUERY = gql`\n  query {\n    cartOpen @client\n  }\n`;\nconst TOGGLE_CART_MUTATION = gql`\n  mutation {\n    toggleCart @client\n  }\n`;\n\nfunction useOutsideAlerter(ref) {\n  /**\r\n   * Alert if clicked on outside of element\r\n   */\n  function handleClickOutside(event) {\n    if (ref.current && !ref.current.contains(event.target)) {\n      toggleCart();\n    }\n  }\n\n  useEffect(() => {\n    // Bind the event listener\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  });\n}\n\nconst Composed = adopt({\n  user: ({\n    render\n  }) => __jsx(User, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, render),\n  toggleCart: ({\n    render\n  }) => __jsx(Mutation, {\n    mutation: TOGGLE_CART_MUTATION,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, render),\n  localState: ({\n    render\n  }) => __jsx(Query, {\n    query: LOCAL_STATE_QUERY,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, render)\n});\n\nconst Cart = () => {\n  const wrapperRef = useRef(null);\n  useOutsideAlerter(wrapperRef);\n  return __jsx(Composed, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, ({\n    user,\n    toggleCart,\n    localState\n  }) => {\n    const me = user.data ? user.data.me : null;\n    if (!me) return null;\n    return __jsx(OutsideAlerter, {\n      onClick: toggleCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, __jsx(CartStyles, {\n      open: localState.data.cartOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, __jsx(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, __jsx(CloseButton, {\n      onClick: toggleCart,\n      title: \"close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"\\xD7\"), me.permissions.includes(\"GUEST\") ? __jsx(Supreme, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Guest Cart\") : __jsx(Supreme, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, me.name, \"'s Cart\"), __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"You have \", me.cart.length, \" item\", me.cart.length === 1 ? \"\" : \"s\", \" in your cart\")), __jsx(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, me.cart.map(cartItem => __jsx(CartItem, {\n      key: cartItem.id,\n      cartItem: cartItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }))), __jsx(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, formatMoney(calcTotalPrice(me.cart))), me.cart.length ? __jsx(TakeMyMoney, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, __jsx(SickButton, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Checkout\")) : __jsx(TakeMyMoney, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, __jsx(SickButton, {\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Checkout\")))));\n  });\n};\n\nexport default Cart;\nexport { LOCAL_STATE_QUERY, TOGGLE_CART_MUTATION };","map":{"version":3,"sources":["C:/Users/Wade/Documents/AHCA Web/Frontend AHCA/components/Cart.js"],"names":["React","useRef","useEffect","Query","Mutation","User","gql","CartStyles","Supreme","CloseButton","SickButton","CartItem","calcTotalPrice","formatMoney","adopt","TakeMyMoney","LOCAL_STATE_QUERY","TOGGLE_CART_MUTATION","useOutsideAlerter","ref","handleClickOutside","event","current","contains","target","toggleCart","document","addEventListener","removeEventListener","Composed","user","render","localState","Cart","wrapperRef","me","data","cartOpen","permissions","includes","name","cart","length","map","cartItem","id"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from \"react\";\r\nimport { Query, Mutation } from \"react-apollo\";\r\nimport User from \"./User\";\r\nimport gql from \"graphql-tag\";\r\nimport CartStyles from \"./styles/CartStyles\";\r\nimport Supreme from \"./styles/Supreme\";\r\nimport CloseButton from \"./styles/CloseButton\";\r\nimport SickButton from \"./styles/SickButton\";\r\nimport CartItem from \"./CartItem\";\r\nimport calcTotalPrice from \"../lib/calcTotalPrice\";\r\nimport formatMoney from \"../lib/formatMoney\";\r\nimport { adopt } from \"react-adopt\";\r\nimport TakeMyMoney from \"./TakeMyMoney\";\r\n\r\nconst LOCAL_STATE_QUERY = gql`\r\n  query {\r\n    cartOpen @client\r\n  }\r\n`;\r\n\r\nconst TOGGLE_CART_MUTATION = gql`\r\n  mutation {\r\n    toggleCart @client\r\n  }\r\n`;\r\n\r\nfunction useOutsideAlerter(ref) {\r\n  /**\r\n   * Alert if clicked on outside of element\r\n   */\r\n  function handleClickOutside(event) {\r\n    if (ref.current && !ref.current.contains(event.target)) {\r\n      toggleCart();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Bind the event listener\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      // Unbind the event listener on clean up\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  });\r\n}\r\n\r\nconst Composed = adopt({\r\n  user: ({ render }) => <User>{render}</User>,\r\n  toggleCart: ({ render }) => (\r\n    <Mutation mutation={TOGGLE_CART_MUTATION}>{render}</Mutation>\r\n  ),\r\n  localState: ({ render }) => <Query query={LOCAL_STATE_QUERY}>{render}</Query>\r\n});\r\n\r\nconst Cart = () => {\r\n  const wrapperRef = useRef(null);\r\n  useOutsideAlerter(wrapperRef);\r\n  return (\r\n    <Composed>\r\n      {({ user, toggleCart, localState }) => {\r\n        const me = user.data ? user.data.me : null;\r\n        if (!me) return null;\r\n        return (\r\n          <OutsideAlerter onClick={toggleCart}>\r\n            <CartStyles open={localState.data.cartOpen}>\r\n              <header>\r\n                <CloseButton onClick={toggleCart} title=\"close\">\r\n                  &times;\r\n                </CloseButton>\r\n                {me.permissions.includes(\"GUEST\") ? (\r\n                  <Supreme>Guest Cart</Supreme>\r\n                ) : (\r\n                  <Supreme>{me.name}'s Cart</Supreme>\r\n                )}\r\n                <p>\r\n                  You have {me.cart.length} item\r\n                  {me.cart.length === 1 ? \"\" : \"s\"} in your cart\r\n                </p>\r\n              </header>\r\n              <ul>\r\n                {me.cart.map(cartItem => (\r\n                  <CartItem key={cartItem.id} cartItem={cartItem} />\r\n                ))}\r\n              </ul>\r\n              <footer>\r\n                <p>{formatMoney(calcTotalPrice(me.cart))}</p>\r\n                {me.cart.length ? (\r\n                  <TakeMyMoney>\r\n                    <SickButton>Checkout</SickButton>\r\n                  </TakeMyMoney>\r\n                ) : (\r\n                  <TakeMyMoney>\r\n                    <SickButton disabled={true}>Checkout</SickButton>\r\n                  </TakeMyMoney>\r\n                )}\r\n              </footer>\r\n            </CartStyles>\r\n          </OutsideAlerter>\r\n        );\r\n      }}\r\n    </Composed>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\nexport { LOCAL_STATE_QUERY, TOGGLE_CART_MUTATION };\r\n"]},"metadata":{},"sourceType":"module"}