{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseFloat from \"@babel/runtime-corejs2/core-js/parse-float\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"C:\\\\Users\\\\Wade\\\\Documents\\\\AHCA Web\\\\Frontend AHCA\\\\pages\\\\shop.js\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation CREATE_GUEST_MUTATION(\\n    $email: String\\n    $name: String\\n    $password: String\\n  ) {\\n    createGuest(email: $email, name: $name, password: $password) {\\n      id\\n      email\\n      name\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport Items from \"../components/Items\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { CURRENT_USER_QUERY } from \"../components/User\";\nimport User from \"../components/User\";\nvar CREATE_GUEST_MUTATION = gql(_templateObject());\n\nvar Shop = function Shop(props, _ref) {\n  var id = _ref.id;\n  return __jsx(User, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, function (_ref2) {\n    var data = _ref2.data,\n        loading = _ref2.loading;\n    console.log(\"loading?\", loading);\n    var me = data ? data.me : null;\n    var guest = me === null ? true : false;\n\n    var _useState = useState(guest),\n        guestState = _useState[0],\n        setGuestState = _useState[1];\n\n    console.log(\"guest\", guest);\n    console.log(\"guestState\", guestState);\n    return !guest ? __jsx(React.Fragment, null, __jsx(Items, {\n      page: _parseFloat(props.query.page) || 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    })) : __jsx(Mutation, {\n      mutation: CREATE_GUEST_MUTATION,\n      variables: {\n        id: id\n      },\n      refetchQueries: [{\n        query: CURRENT_USER_QUERY\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, function (createGuest, _ref3) {\n      var loading = _ref3.loading,\n          error = _ref3.error;\n      console.log(\"gueststate\", guestState);\n      useEffect(function () {\n        function fetchData() {\n          return _regeneratorRuntime.async(function fetchData$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  console.log(\"before createGuest\", me);\n                  _context.next = 3;\n                  return _regeneratorRuntime.awrap(createGuest());\n\n                case 3:\n                  console.log(\"after createGuest\", me);\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          });\n        }\n\n        console.log(\"checking guest within useEffect\", guest);\n        guest && fetchData();\n      }, []);\n      setGuestState(false);\n      return __jsx(React.Fragment, null, __jsx(Items, {\n        page: _parseFloat(props.query.page) || 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }));\n    });\n  });\n};\n\nexport default Shop;","map":{"version":3,"sources":["C:/Users/Wade/Documents/AHCA Web/Frontend AHCA/pages/shop.js"],"names":["React","useState","useEffect","Items","Mutation","gql","CURRENT_USER_QUERY","User","CREATE_GUEST_MUTATION","Shop","props","id","data","loading","console","log","me","guest","guestState","setGuestState","query","page","createGuest","error","fetchData"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,kBAAT,QAAmC,oBAAnC;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AAEA,IAAMC,qBAAqB,GAAGH,GAAH,mBAA3B;;AAcA,IAAMI,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD;AAAA,MAAUC,EAAV,QAAUA,EAAV;AAAA,SACX,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,iBAAuB;AAAA,QAApBC,IAAoB,SAApBA,IAAoB;AAAA,QAAdC,OAAc,SAAdA,OAAc;AACtBC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,OAAxB;AACA,QAAIG,EAAE,GAAGJ,IAAI,GAAGA,IAAI,CAACI,EAAR,GAAa,IAA1B;AACA,QAAIC,KAAK,GAAGD,EAAE,KAAK,IAAP,GAAc,IAAd,GAAqB,KAAjC;;AAHsB,oBAIcf,QAAQ,CAACgB,KAAD,CAJtB;AAAA,QAIfC,UAJe;AAAA,QAIHC,aAJG;;AAKtBL,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBE,KAArB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BG,UAA1B;AACA,WAAO,CAACD,KAAD,GACL,4BACE,MAAC,KAAD;AAAO,MAAA,IAAI,EAAE,YAAWP,KAAK,CAACU,KAAN,CAAYC,IAAvB,KAAgC,CAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADK,GAKL,MAAC,QAAD;AACE,MAAA,QAAQ,EAAEb,qBADZ;AAEE,MAAA,SAAS,EAAE;AAAEG,QAAAA,EAAE,EAAFA;AAAF,OAFb;AAGE,MAAA,cAAc,EAAE,CAAC;AAAES,QAAAA,KAAK,EAAEd;AAAT,OAAD,CAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKG,UAACgB,WAAD,SAAqC;AAAA,UAArBT,OAAqB,SAArBA,OAAqB;AAAA,UAAZU,KAAY,SAAZA,KAAY;AACpCT,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BG,UAA1B;AACAhB,MAAAA,SAAS,CAAC,YAAM;AACd,iBAAesB,SAAf;AAAA;AAAA;AAAA;AAAA;AACEV,kBAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCC,EAAlC;AADF;AAAA,mDAEQM,WAAW,EAFnB;;AAAA;AAGER,kBAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCC,EAAjC;;AAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKAF,QAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CE,KAA/C;AACAA,QAAAA,KAAK,IAAIO,SAAS,EAAlB;AACD,OARQ,EAQN,EARM,CAAT;AASAL,MAAAA,aAAa,CAAC,KAAD,CAAb;AACA,aACE,4BACE,MAAC,KAAD;AAAO,QAAA,IAAI,EAAE,YAAWT,KAAK,CAACU,KAAN,CAAYC,IAAvB,KAAgC,CAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAKD,KAtBH,CALF;AA8BD,GAtCH,CADW;AAAA,CAAb;;AA2CA,eAAeZ,IAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Items from \"../components/Items\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport { CURRENT_USER_QUERY } from \"../components/User\";\r\nimport User from \"../components/User\";\r\n\r\nconst CREATE_GUEST_MUTATION = gql`\r\n  mutation CREATE_GUEST_MUTATION(\r\n    $email: String\r\n    $name: String\r\n    $password: String\r\n  ) {\r\n    createGuest(email: $email, name: $name, password: $password) {\r\n      id\r\n      email\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nconst Shop = (props, { id }) => (\r\n  <User>\r\n    {({ data, loading }) => {\r\n      console.log(\"loading?\", loading);\r\n      let me = data ? data.me : null;\r\n      let guest = me === null ? true : false;\r\n      const [guestState, setGuestState] = useState(guest);\r\n      console.log(\"guest\", guest);\r\n      console.log(\"guestState\", guestState);\r\n      return !guest ? (\r\n        <>\r\n          <Items page={parseFloat(props.query.page) || 1} />\r\n        </>\r\n      ) : (\r\n        <Mutation\r\n          mutation={CREATE_GUEST_MUTATION}\r\n          variables={{ id }}\r\n          refetchQueries={[{ query: CURRENT_USER_QUERY }]}\r\n        >\r\n          {(createGuest, { loading, error }) => {\r\n            console.log(\"gueststate\", guestState);\r\n            useEffect(() => {\r\n              async function fetchData() {\r\n                console.log(\"before createGuest\", me);\r\n                await createGuest();\r\n                console.log(\"after createGuest\", me);\r\n              }\r\n              console.log(\"checking guest within useEffect\", guest);\r\n              guest && fetchData();\r\n            }, []);\r\n            setGuestState(false);\r\n            return (\r\n              <>\r\n                <Items page={parseFloat(props.query.page) || 1} />\r\n              </>\r\n            );\r\n          }}\r\n        </Mutation>\r\n      );\r\n    }}\r\n  </User>\r\n);\r\n\r\nexport default Shop;\r\n"]},"metadata":{},"sourceType":"module"}